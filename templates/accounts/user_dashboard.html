{% extends 'base.html' %}
{% load static %}

{% block title %}
    {{ user.profile.get_role_display }} Dashboard - Online Learning Platform
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <!-- Sidebar Navigation -->
        <div class="col-md-3 col-lg-3 d-md-block bg-light sidebar collapse show" id="sidebarMenu">
            <div class="position-sticky pt-3">
                <div class="list-group list-group-flush">
                    <a class="list-group-item list-group-item-action {% if active_tab == 'profile' %}active{% endif %}" id="profile-tab" href="{% url 'user_dashboard_with_tab' 'profile' %}">
                        <i class="bi bi-person me-2"></i> Profile
                    </a>
                    
                    {% if user.profile.is_student or user.profile.is_instructor %}
                    <a class="list-group-item list-group-item-action {% if active_tab == 'courses' %}active{% endif %}" id="courses-tab" href="{% url 'user_dashboard_with_tab' 'courses' %}">
                        <i class="bi bi-book me-2"></i> My Courses
                    </a>
                    {% endif %}

                    {% if user.profile.is_instructor %}
                    <a class="list-group-item list-group-item-action {% if active_tab == 'performance' %}active{% endif %}" id="performance-tab" href="{% url 'user_dashboard_with_tab' 'performance' %}">
                        <i class="bi bi-graph-up me-2"></i> Performance Overview
                    </a>
                    <a class="list-group-item list-group-item-action {% if active_tab == 'enrollments' %}active{% endif %}" id="enrollments-tab" href="{% url 'user_dashboard_with_tab' 'enrollments' %}">
                        <i class="bi bi-people me-2"></i> Recent Enrollments
                    </a>
                    {% endif %}

                    {% if user.profile.is_student %}
                    <a class="list-group-item list-group-item-action {% if active_tab == 'progress' %}active{% endif %}" id="progress-tab" href="{% url 'user_dashboard_with_tab' 'progress' %}">
                        <i class="bi bi-graph-up me-2"></i> Learning Progress
                    </a>
                    <a class="list-group-item list-group-item-action {% if active_tab == 'history' %}active{% endif %}" id="history-tab" href="{% url 'user_dashboard_with_tab' 'history' %}">
                        <i class="bi bi-clock-history me-2"></i> Payment History
                    </a>
                    <a class="list-group-item list-group-item-action {% if active_tab == 'certificates' %}active{% endif %}" id="certificates-tab" href="{% url 'user_dashboard_with_tab' 'certificates' %}">
                        <i class="bi bi-award me-2"></i> My Certificates
                    </a>
                    {% endif %}
                    
                    {% if user.profile.is_admin %}
                    <a class="list-group-item list-group-item-action {% if active_tab == 'admin' %}active{% endif %}" id="admin-tab" href="{% url 'user_dashboard_with_tab' 'admin' %}">
                        <i class="bi bi-speedometer2 me-2"></i> Admin Overview
                    </a>
                    {% endif %}

                    <!-- Logout Link -->
                    <a class="list-group-item list-group-item-action text-danger" href="#" data-bs-toggle="modal" data-bs-target="#logoutModal">
                        <i class="bi bi-box-arrow-right me-2"></i> Logout
                    </a>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="col-md-9 ms-sm-auto col-lg-9 px-md-4">
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2">{{ user.profile.get_role_display }} Dashboard</h1>
            </div>

            <div class="tab-content" id="dashboardTabContent">
                <!-- Profile Tab -->
                <div class="tab-pane fade {% if active_tab == 'profile' %}show active{% endif %}" id="profile" role="tabpanel">
                    <div class="card shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Profile Information</h5>
                        </div>
                        <div class="card-body">
                            <div class="row align-items-center mb-4">
                                <div class="col-auto">
                                    {% if user.profile.profile_picture %}
                                        <img src="{{ user.profile.profile_picture.url }}" class="rounded-circle" alt="Profile Picture" width="100" height="100">
                                    {% else %}
                                        <div class="bg-secondary rounded-circle d-flex align-items-center justify-content-center text-white" style="width: 100px; height: 100px; font-size: 2.5rem;">
                                            {{ user.username|make_list|first|upper }}
                                        </div>
                                    {% endif %}
                                </div>
                                <div class="col">
                                    <h4 class="mb-1">{{ user.get_full_name|default:user.username }}</h4>
                                    <p class="text-muted mb-0">{{ user.email }}</p>
                                    <p class="text-muted mb-0"><small>Role: {{ user.profile.get_role_display }}</small></p>
                                </div>
                                <div class="col-auto">
                                    <a href="{% url 'edit_profile' %}" class="btn btn-outline-primary">
                                        <i class="bi bi-pencil me-1"></i> Edit Profile
                                    </a>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Username:</strong> {{ user.username }}</p>
                                    {% if user.profile.bio %}
                                        <p><strong>Bio:</strong> {{ user.profile.bio }}</p>
                                    {% endif %}
                                </div>
                                <div class="col-md-6">
                                    {% if user.profile.location %}
                                        <p><strong>Location:</strong> {{ user.profile.location }}</p>
                                    {% endif %}
                                    {% if user.profile.website %}
                                        <p><strong>Website:</strong> <a href="{{ user.profile.website }}" target="_blank">{{ user.profile.website }}</a></p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- My Courses Tab -->
                <div class="tab-pane fade {% if active_tab == 'courses' %}show active{% endif %}" id="courses" role="tabpanel">
                    {% if user.profile.is_instructor %}
                        <!-- Instructor Courses Content -->
                        <div class="row">
                            <!-- Filter Sidebar -->
                            <div class="col-lg-12 mb-4">
                                <div class="card shadow-sm">
                                    <div class="card-header bg-white d-flex justify-content-between align-items-center">
                                        <span><i class="bi bi-funnel"></i> Filter My Courses</span>
                                        <a href="{% url 'courses:create_course' %}" class="btn btn-sm btn-primary">
                                            <i class="bi bi-plus-circle"></i> Create New Course
                                        </a>
                                    </div>
                                    <div class="card-body">
                                        <div class="row g-3">
                                            <div class="col-md-4">
                                                <label for="search-input" class="form-label fw-bold small">Search</label>
                                                <input type="text" class="form-control form-control-sm" id="search-input" placeholder="Search by title...">
                                            </div>
                                            <div class="col-md-4">
                                                <label for="sort-select" class="form-label fw-bold small">Sort By</label>
                                                <select class="form-select form-select-sm" id="sort-select">
                                                    <option value="newest">Newest First</option>
                                                    <option value="oldest">Oldest First</option>
                                                    <option value="title-asc">Title: A-Z</option>
                                                    <option value="title-desc">Title: Z-A</option>
                                                    <option value="price-low">Price: Low to High</option>
                                                    <option value="price-high">Price: High to Low</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label fw-bold small">Price Filter</label>
                                                <div class="d-flex gap-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="price-filter" id="price-all" value="all" checked>
                                                        <label class="form-check-label small" for="price-all">All</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="price-filter" id="price-free" value="free">
                                                        <label class="form-check-label small" for="price-free">Free</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="price-filter" id="price-paid" value="paid">
                                                        <label class="form-check-label small" for="price-paid">Paid</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Main Content -->
                            <div class="col-lg-12">
                                {% if courses %}
                                <div class="row" id="courses-container">
                                    {% for course in courses %}
                                    <div class="col-xl-4 col-md-6 mb-4 course-item" 
                                        data-title="{{ course.title|lower }}"
                                        data-price="{{ course.price }}"
                                        data-created="{{ course.created_at|date:'U' }}">
                                        <div class="card h-100 shadow-sm course-card" {% if course.slug %}data-url="{% url 'courses:course_detail' course.slug %}"{% endif %}>
                                            <div class="ratio ratio-16x9">
                                                {% if course.thumbnail %}
                                                    <img src="{{ course.thumbnail.url }}" class="card-img-top" alt="{{ course.title }}" style="object-fit: cover;">
                                                {% else %}
                                                    <div class="bg-gradient bg-secondary w-100 h-100 d-flex align-items-center justify-content-center">
                                                        <i class="bi bi-book text-white" style="font-size: 3rem;"></i>
                                                    </div>
                                                {% endif %}
                                            </div>
                                            <div class="card-body d-flex flex-column">
                                                <h5 class="card-title h6">{{ course.title|truncatewords:8 }}</h5>
                                                <p class="card-text text-muted small mb-2">{{ course.short_description|truncatewords:10|default:"No description available." }}</p>
                                                <div class="mb-2">
                                                    {% if course.price == 0 %}
                                                        <span class="badge bg-success">FREE</span>
                                                    {% else %}
                                                        <span class="badge bg-primary">${{ course.price }}</span>
                                                    {% endif %}
                                                </div>
                                                <div class="mt-auto">
                                                    <div class="d-flex justify-content-between align-items-center flex-wrap gap-1">
                                                        {% if course.slug %}
                                                            <a href="{% url 'courses:course_detail' slug=course.slug %}" class="btn btn-outline-primary btn-sm">View</a>
                                                            <a href="{% url 'courses:edit_course' slug=course.slug %}" class="btn btn-outline-secondary btn-sm">Edit</a>
                                                            <button type="button" class="btn btn-outline-danger btn-sm delete-course-btn" 
                                                                data-bs-toggle="modal" data-bs-target="#deleteCourseModal"
                                                                data-delete-url="{% url 'courses:delete_course' slug=course.slug %}"
                                                                data-course-title="{{ course.title }}">
                                                                Delete
                                                            </button>
                                                        {% else %}
                                                            <a href="#" class="btn btn-outline-primary btn-sm disabled">View</a>
                                                            <a href="#" class="btn btn-outline-secondary btn-sm disabled">Edit</a>
                                                            <a href="#" class="btn btn-outline-danger btn-sm disabled">Delete</a>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>

                                <div class="alert alert-warning text-center py-4 d-none" id="no-results">
                                    <i class="bi bi-search" style="font-size: 2rem;"></i>
                                    <h5 class="mt-2">No courses match your filters</h5>
                                </div>

                                {% else %}
                                <div class="alert alert-info text-center py-5">
                                    <i class="bi bi-journal-plus" style="font-size: 3rem;"></i>
                                    <h4 class="mt-3">You haven't created any courses yet.</h4>
                                    <p class="mb-3">Start sharing your knowledge with the world!</p>
                                    <a href="{% url 'courses:create_course' %}" class="btn btn-primary">
                                        <i class="bi bi-plus-circle"></i> Create Your First Course
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                        </div>

                    {% else %}
                        <!-- Student Courses Content -->
                        <div class="row">
                            <!-- Filter Sidebar -->
                            <div class="col-lg-12 mb-4">
                                <div class="card shadow-sm">
                                    <div class="card-header bg-white d-flex justify-content-between align-items-center">
                                        <span><i class="bi bi-funnel"></i> Filter My Courses</span>
                                        <a href="{% url 'courses:course_list' %}" class="btn btn-sm btn-primary">
                                            <i class="bi bi-search"></i> Browse More
                                        </a>
                                    </div>
                                    <div class="card-body">
                                        <div class="row g-3">
                                            <div class="col-md-4">
                                                <label for="search-input" class="form-label fw-bold small">Search</label>
                                                <input type="text" class="form-control form-control-sm" id="search-input" placeholder="Search by title...">
                                            </div>
                                            <div class="col-md-4">
                                                <label for="sort-select" class="form-label fw-bold small">Sort By</label>
                                                <select class="form-select form-select-sm" id="sort-select">
                                                    <option value="newest">Newest Enrolled</option>
                                                    <option value="oldest">Oldest Enrolled</option>
                                                    <option value="title-asc">Title: A-Z</option>
                                                    <option value="title-desc">Title: Z-A</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label fw-bold small">Status Filter</label>
                                                <div class="d-flex gap-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="status-filter" id="status-all" value="all" checked>
                                                        <label class="form-check-label small" for="status-all">All</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="status-filter" id="status-progress" value="progress">
                                                        <label class="form-check-label small" for="status-progress">In Progress</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="status-filter" id="status-completed" value="completed">
                                                        <label class="form-check-label small" for="status-completed">Completed</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Main Content -->
                            <div class="col-lg-12">
                                {% if enrollments %}
                                <div class="row" id="courses-container">
                                    {% for enrollment in enrollments %}
                                    <div class="col-xl-4 col-md-6 mb-4 course-item" 
                                        data-title="{{ enrollment.course.title|lower }}"
                                        data-status="{% if enrollment.is_completed %}completed{% else %}progress{% endif %}"
                                        data-enrolled="{{ enrollment.enrollment_date|date:'U' }}">
                                        <div class="card h-100 shadow-sm course-card" data-url="{% url 'courses:course_detail' slug=enrollment.course.slug %}">
                                            <div class="ratio ratio-16x9">
                                                {% if enrollment.course.thumbnail %}
                                                    <img src="{{ enrollment.course.thumbnail.url }}" class="card-img-top" alt="{{ enrollment.course.title }}" style="object-fit: cover;">
                                                {% else %}
                                                    <div class="bg-gradient bg-secondary w-100 h-100 d-flex align-items-center justify-content-center">
                                                        <i class="bi bi-book text-white" style="font-size: 3rem;"></i>
                                                    </div>
                                                {% endif %}
                                            </div>
                                            <div class="card-body d-flex flex-column">
                                                <h5 class="card-title h6">{{ enrollment.course.title|truncatewords:8 }}</h5>
                                                <p class="card-text text-muted small">Instructor: {{ enrollment.course.instructor.get_full_name }}</p>
                                                
                                                <div class="mb-2">
                                                    {% if enrollment.is_completed %}
                                                        <span class="badge bg-success">Completed</span>
                                                    {% else %}
                                                        <span class="badge bg-warning text-dark">In Progress</span>
                                                    {% endif %}
                                                </div>

                                                <div class="mt-auto">
                                                    <div class="d-grid gap-2">
                                                        <a href="{% url 'courses:course_detail' slug=enrollment.course.slug %}" class="btn btn-primary btn-sm">Continue Learning</a>
                                                        {% if enrollment.is_completed and enrollment.certificates.first %}
                                                            <a href="{% url 'courses:course_certificate' enrollment.certificates.first.certificate_number %}" class="btn btn-outline-success btn-sm">View Certificate</a>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>

                                <div class="alert alert-warning text-center py-4 d-none" id="no-results">
                                    <i class="bi bi-search" style="font-size: 2rem;"></i>
                                    <h5 class="mt-2">No courses match your filters</h5>
                                </div>

                                {% else %}
                                <div class="alert alert-info text-center py-5">
                                    <i class="bi bi-journal-plus" style="font-size: 3rem;"></i>
                                    <h4 class="mt-3">You haven't enrolled in any courses yet.</h4>
                                    <p class="mb-3">Start learning today!</p>
                                    <a href="{% url 'courses:course_list' %}" class="btn btn-primary">
                                        <i class="bi bi-search"></i> Browse Courses
                                    </a>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    {% endif %}
                </div>

                <!-- Instructor: Performance Tab -->
                {% if user.profile.is_instructor %}
                <div class="tab-pane fade {% if active_tab == 'performance' %}show active{% endif %}" id="performance" role="tabpanel">
                    <div class="card shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Performance Overview</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-4 text-center">
                                <div class="col-sm-6">
                                    <div class="p-3 border rounded bg-light">
                                        <small class="text-muted d-block mb-1">Total Students</small>
                                        <h3 class="mb-0" id="total-students">-</h3>
                                    </div>
                                </div>
                                <div class="col-sm-6 mt-3 mt-sm-0">
                                    <div class="p-3 border rounded bg-light">
                                        <small class="text-muted d-block mb-1">Total Revenue</small>
                                        <h3 class="mb-0" id="total-revenue">-</h3>
                                    </div>
                                </div>
                            </div>
                            <canvas id="instructorRevenueChart" height="100"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Instructor: Recent Enrollments Tab -->
                <div class="tab-pane fade {% if active_tab == 'enrollments' %}show active{% endif %}" id="enrollments" role="tabpanel">
                    <div class="card shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Recent Enrollments</h5>
                        </div>
                        <div class="card-body p-0">
                            {% if enrollments %}
                                <div class="table-responsive">
                                    <table class="table table-hover align-middle mb-0">
                                        <thead class="table-light">
                                            <tr>
                                                <th class="ps-3">Student</th>
                                                <th>Course</th>
                                                <th>Date</th>
                                                <th>Paid</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for enrollment in enrollments %}
                                            <tr>
                                                <td class="ps-3">
                                                    <div class="d-flex align-items-center">
                                                        <div class="avatar-circle me-2 bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">
                                                            {{ enrollment.user.username|make_list|first|upper }}
                                                        </div>
                                                        <div>
                                                            <div class="fw-bold section-title">{{ enrollment.user.get_full_name|default:enrollment.user.username }}</div>
                                                            <div class="text-muted small">{{ enrollment.user.email }}</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>{{ enrollment.course.title }}</td>
                                                <td>{{ enrollment.enrolled_at|date:"M d, Y" }}</td>
                                                <td>
                                                    {% if enrollment.course.price == 0 %}
                                                        <span class="badge bg-success">Free</span>
                                                    {% else %}
                                                        ${{ enrollment.course.price }}
                                                    {% endif %}
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            {% else %}
                                <div class="text-center py-5">
                                    <p class="text-muted mb-0">No enrollments found.</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Student: Progress Tab -->
                {% if user.profile.is_student %}
                <div class="tab-pane fade {% if active_tab == 'progress' %}show active{% endif %}" id="progress" role="tabpanel">
                    <div class="card shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Learning Progress</h5>
                        </div>
                        <div class="card-body">
                            <canvas id="studentProgressChart" style="max-height: 400px;"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Student: Payment History Tab -->
                <div class="tab-pane fade {% if active_tab == 'history' %}show active{% endif %}" id="history" role="tabpanel">
                    <div class="card shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Payment History</h5>
                        </div>
                        <div class="card-body p-0">
                            {% if payments %}
                                <div class="table-responsive">
                                    <table class="table table-hover mb-0 align-middle">
                                        <thead class="table-light">
                                            <tr>
                                                <th class="ps-3">Item</th>
                                                <th>Amount</th>
                                                <th>Date</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for payment in payments %}
                                            <tr>
                                                <td class="ps-3">
                                                    {% if payment.course %}
                                                        {{ payment.course.title }}
                                                    {% else %}
                                                        {{ payment.purchase_type|title }}
                                                    {% endif %}
                                                    <div class="small text-muted">ID: {{ payment.transaction_id|truncatechars:10 }}</div>
                                                </td>
                                                <td>{{ payment.amount }} {{ payment.currency }}</td>
                                                <td>{{ payment.created_at|date:"M d, Y" }}</td>
                                                <td>
                                                    {% if payment.status == 'completed' %}
                                                        <span class="badge bg-success">Completed</span>
                                                    {% elif payment.status == 'pending' %}
                                                        <span class="badge bg-warning">Pending</span>
                                                    {% elif payment.status == 'failed' %}
                                                        <span class="badge bg-danger">Failed</span>
                                                    {% else %}
                                                        <span class="badge bg-secondary">{{ payment.status|title }}</span>
                                                    {% endif %}
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            {% else %}
                                <div class="text-center py-5">
                                    <p class="text-muted mb-0">No payment history found.</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Student: My Certificates Tab -->
                <div class="tab-pane fade {% if active_tab == 'certificates' %}show active{% endif %}" id="certificates" role="tabpanel">
                    <div class="card shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">My Certificates</h5>
                        </div>
                        <div class="card-body">
                            {% if user.certificates.all %}
                                <div class="row">
                                    {% for certificate in user.certificates.all %}
                                    <div class="col-md-6 mb-3">
                                        <div class="card h-100 border-success">
                                            <div class="card-body text-center">
                                                <i class="bi bi-award text-success mb-2" style="font-size: 2rem;"></i>
                                                <h5 class="card-title">{{ certificate.course.title }}</h5>
                                                <p class="card-text small text-muted">Issued: {{ certificate.issued_at|date:"M d, Y" }}</p>
                                                <a href="{% url 'courses:course_certificate' certificate.certificate_number %}" class="btn btn-sm btn-outline-success stretched-link">View Certificate</a>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <div class="text-center py-5">
                                    <i class="bi bi-award" style="font-size: 2rem; color: #ccc;"></i>
                                    <p class="mt-2 text-muted">You haven't earned any certificates yet.</p>
                                    <p class="small">Complete courses to earn certificates!</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}
                
                <!-- Admin Tab -->
                {% if user.profile.is_admin %}
                <div class="tab-pane fade {% if active_tab == 'admin' %}show active{% endif %}" id="admin" role="tabpanel">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card text-white bg-primary mb-3">
                                <div class="card-header">Students</div>
                                <div class="card-body">
                                    <h5 class="card-title">{{ total_students }}</h5>
                                    <p class="card-text">Total registered students</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card text-white bg-success mb-3">
                                <div class="card-header">Instructors</div>
                                <div class="card-body">
                                    <h5 class="card-title">{{ total_instructors }}</h5>
                                    <p class="card-text">Total registered instructors</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card text-white bg-info mb-3">
                                <div class="card-header">Courses</div>
                                <div class="card-body">
                                    <h5 class="card-title">{{ total_courses }}</h5>
                                    <p class="card-text">Total available courses</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h5>Admin Actions</h5>
                        </div>
                        <div class="card-body">
                            <a href="{% url 'admin:index' %}" class="btn btn-primary">Django Admin Panel</a>
                        </div>
                    </div>
                </div>
                {% endif %}

            </div>
        </main>
    </div>
</div>

<!-- Delete Course Modal -->
{% include "courses/includes/delete_modal.html" with modal_id="deleteCourseModal" modal_title="Delete Course" item_type="course" warning_message="This action cannot be undone. All modules and lessons in this course will be permanently deleted." %}
{% endblock %}

{% block extra_js %}
<script src="{% static 'accounts/analytics.js' %}"></script>
<script src="{% static 'accounts/user_dashboard.js' %}"></script>
{% endblock %}